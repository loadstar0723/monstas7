#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "π€ Push μ „ μλ™ κ²€μ¦ μ‹μ‘..."

# ν„μ¬ λ””λ ‰ν† λ¦¬ μ €μ¥
ORIGINAL_DIR=$(pwd)

# frontend λ””λ ‰ν† λ¦¬λ΅ μ΄λ™
cd frontend

echo "1οΈβƒ£ Prisma Client ν™•μΈ..."
npx prisma generate || {
    echo "β Prisma μ—λ¬! push μ¤‘λ‹¨"
    cd $ORIGINAL_DIR
    exit 1
}

echo "2οΈβƒ£ λΉλ“ ν…μ¤νΈ..."
npm run build || {
    echo "β λΉλ“ μ‹¤ν¨! λ‹¤μ μ‚¬ν•­μ„ ν™•μΈν•μ„Έμ”:"
    echo "  - ν•¨μλ…μ΄ μ«μλ΅ μ‹μ‘ν•λ”μ§€ ν™•μΈ"
    echo "  - import μ—λ¬ ν™•μΈ"
    echo "  - λ¬Έλ²• μ—λ¬ ν™•μΈ"
    cd $ORIGINAL_DIR
    exit 1
}

echo "β… λ¨λ“  κ²€μ¦ ν†µκ³Ό! Pushλ¥Ό μ§„ν–‰ν•©λ‹λ‹¤..."
cd $ORIGINAL_DIR